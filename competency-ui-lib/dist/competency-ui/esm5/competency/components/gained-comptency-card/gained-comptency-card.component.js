import * as tslib_1 from "tslib";
import { Component } from '@angular/core';
import { forkJoin } from 'rxjs';
import { GainedService } from '../../services/gained.service';
import { RequestUtil } from '../../services/request-util';
var GainedComptencyCardComponent = /** @class */ (function () {
    function GainedComptencyCardComponent(gainedService) {
        this.gainedService = gainedService;
        this.loading = false;
        this.panelOpenState = false;
        this.requestUtil = new RequestUtil();
    }
    GainedComptencyCardComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.loading = true;
        var allEntity = this.getAllEntity();
        var userPassbook = this.getAllUserPassbook();
        forkJoin([allEntity, userPassbook]).subscribe(function (res) {
            var response = _this.requestUtil.formatedGainedCompetency(res[0].result.response, res[1].result.content);
            _this.gainedproficencyData = response;
            _this.loading = false;
        });
    };
    GainedComptencyCardComponent.prototype.getAllUserPassbook = function () {
        var reqBody = {
            "request": {
                "typeName": "competency"
            }
        };
        return this.gainedService.fetchUserPassbook(reqBody);
    };
    GainedComptencyCardComponent.prototype.getAllEntity = function () {
        var reqBody = {
            "search": {
                "type": "Competency"
            }
        };
        return this.gainedService.fetchAllEntity(reqBody);
    };
    GainedComptencyCardComponent.ctorParameters = function () { return [
        { type: GainedService }
    ]; };
    GainedComptencyCardComponent = tslib_1.__decorate([
        Component({
            selector: 'lib-gained-comptency-card',
            template: "<lib-app-loader *ngIf=\"loading === true\"></lib-app-loader>\r\n<ng-container *ngFor=\"let proficency of gainedproficencyData\">\r\n<div class=\"card-container example-container container-balanced\">\r\n    <!-- <div class=\"date justify-end mr-2\">\r\n        {{date}}\r\n    </div> -->\r\n    <ng-container *ngIf=\"proficency?.title\">\r\n        <div class=\"title\">{{proficency?.title}}</div>\r\n    </ng-container>\r\n\r\n    <div class=\"levelsTitle\">\r\n        Levels:\r\n    </div>\r\n    <mat-accordion>\r\n        <mat-expansion-panel class=\"w-full panel\" hideToggle (opened)=\"panelOpenState = true\"\r\n            (closed)=\"panelOpenState = false\">\r\n            <mat-expansion-panel-header class=\"flex-between items-center panel-header w-full\">\r\n                <mat-panel-description class=\"panel-header-description\">\r\n                    <ng-container *ngFor=\"let proficiency of proficency?.proficiencyLevels\">\r\n                        <ng-container *ngIf=\"proficiency.selected; else addLevel\">\r\n                            <div class=\"level mb-1\" [ngStyle]=\"{'background-color': proficiency.color}\">\r\n                                {{proficiency?.displayLevel}}\r\n                            </div>\r\n                        </ng-container>\r\n                        <ng-template #addLevel>\r\n                            <div (click)=\"$event.stopPropagation();\" class=\"level mb-1 pointer-events\">\r\n                                {{proficiency?.displayLevel}}\r\n                            </div>\r\n                        </ng-template>\r\n                    </ng-container>\r\n                    <div class=\"level mb-1 pointer-events\">\r\n                        <mat-icon [ngClass]=\"{'arrowReverse': panelOpenState }\">keyboard_arrow_down</mat-icon>\r\n                    </div>\r\n                </mat-panel-description>\r\n            </mat-expansion-panel-header>\r\n            <div>\r\n                <span class=\"log-header\">Log:</span>\r\n                <ng-container *ngFor=\"let log of proficency?.logs; let logIndex = index\">\r\n                    <div class=\"log\">\r\n                        <div class=\"flex\">\r\n                            <ng-container *ngIf=\"log.header\">\r\n                                <span class=\"flex-1\">Level {{log.level}}: {{log.header}}</span>\r\n                                <span class=\"log-date mr-2\">{{log?.date| date:'dd/MM/yyyy'}}</span>\r\n                            </ng-container>\r\n                        </div>\r\n                        <ng-container *ngIf=\"log.description\">\r\n                            <div class=\"mt-2\" [ngClass]=\"{'hideContent': !log.keyboardArrowUp}\">{{log.description}}</div>\r\n                            <div class=\"justify-end\">\r\n                                <mat-icon (click)=\"log.keyboardArrowUp = !log.keyboardArrowUp\" class=\"mr-3 pointer-events\" [ngClass]=\"{'arrowReverse': log.keyboardArrowUp }\">keyboard_arrow_down</mat-icon>\r\n                            </div>\r\n                        </ng-container>\r\n                    </div>\r\n                </ng-container>\r\n            </div>\r\n        </mat-expansion-panel>\r\n    </mat-accordion>\r\n</div>\r\n</ng-container>",
            styles: [":root{font-size:16px;--blue:#1C5D95;--yellow:#FFF4DF;--teal:#A4DFCA;--black:#000000;--white:#ffffff;--light-gray:#eff6fc;--grey-100:#DFEDF9;--gray-200:#8E8E8E;--gray-300:#989898;--gray-400:#808080;--grey-500:#919191;--yellow-500:#FFFBB0;--blue-500:#7CB5E6}.button-primary{background-color:var(--blue)!important;border-radius:50px;gap:8px;color:var(--white)!important;border:none}.mat-primary-background{padding:9px 40px;width:310px;cursor:pointer}.date{font-size:12px;line-height:14px;letter-spacing:-.02em;color:var(--gray-300)}.justify-end{display:flex;justify-content:flex-end}.card-container{margin:15px 2px;padding:14px 10px 20px 14px;box-shadow:0 0 4px rgba(0,0,0,.15);border-radius:10px;background:var(--white)}.title{font-size:24px;line-height:29px;letter-spacing:-.02em;margin-bottom:18px}.levelsTitle{font-size:14px;line-height:24px;letter-spacing:-.02em;color:var(--black)}.panel{box-shadow:0 0!important;padding:1px 3px 1px 0;pointer-events:none}.panel-header{padding:0!important;background:0 0!important}.panel-header-description{margin:0!important;padding:1px}.pointer-events{pointer-events:all;cursor:pointer}.arrowReverse{transform:rotateX(180deg)}.level{width:47px;max-width:16.6%;height:36px;display:flex;justify-content:center;align-items:center;box-shadow:0 0 2.17333px rgba(0,0,0,.2509803922)}.log-header{font-size:14px;line-height:24px;letter-spacing:-.02em;color:var(--black)}.log{font-style:italic;font-size:14px;line-height:16px;letter-spacing:-.02em;color:var(--gray-400);border-bottom:1px solid #ddd;padding-bottom:9px;margin-top:10px}.log-date{font-style:normal;font-size:12px;line-height:14px;letter-spacing:-.02em;color:var(--gray-400)}::ng-deep .mat-expansion-panel-body{padding:0!important}:host ::ng-deep .mat-content{display:unset!important}.hideContent{display:none}"]
        })
    ], GainedComptencyCardComponent);
    return GainedComptencyCardComponent;
}());
export { GainedComptencyCardComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FpbmVkLWNvbXB0ZW5jeS1jYXJkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhYXN0cmlrYS9jb21wdGVuY3kvY29tcGV0ZW5jeS8iLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvZ2FpbmVkLWNvbXB0ZW5jeS1jYXJkL2dhaW5lZC1jb21wdGVuY3ktY2FyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFFbEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNoQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDOUQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBTzFEO0lBTUUsc0NBQ1MsYUFBNEI7UUFBNUIsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFKckMsWUFBTyxHQUFHLEtBQUssQ0FBQTtRQUNmLG1CQUFjLEdBQVksS0FBSyxDQUFDO1FBTTlCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQTtJQUN0QyxDQUFDO0lBRUQsK0NBQVEsR0FBUjtRQUFBLGlCQVNDO1FBUkMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUE7UUFDbkIsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFBO1FBQ3JDLElBQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFBO1FBQzlDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsRUFBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFDLEdBQUc7WUFDL0MsSUFBTSxRQUFRLEdBQUcsS0FBSSxDQUFDLFdBQVcsQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBQ3pHLEtBQUksQ0FBQyxvQkFBb0IsR0FBRyxRQUFRLENBQUE7WUFDcEMsS0FBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUE7UUFDdEIsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0lBRU8seURBQWtCLEdBQTFCO1FBQ0UsSUFBTSxPQUFPLEdBQUc7WUFDZCxTQUFTLEVBQUU7Z0JBQ1QsVUFBVSxFQUFFLFlBQVk7YUFDekI7U0FDRixDQUFDO1FBQ0YsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3RELENBQUM7SUFHTyxtREFBWSxHQUFwQjtRQUNFLElBQU0sT0FBTyxHQUFHO1lBQ2QsUUFBUSxFQUFFO2dCQUNSLE1BQU0sRUFBRSxZQUFZO2FBQ3JCO1NBQ0YsQ0FBQztRQUNGLE9BQVEsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDcEQsQ0FBQzs7Z0JBbEN1QixhQUFhOztJQVAxQiw0QkFBNEI7UUFMeEMsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLDJCQUEyQjtZQUNyQyw0dEdBQXFEOztTQUV0RCxDQUFDO09BQ1csNEJBQTRCLENBMEN4QztJQUFELG1DQUFDO0NBQUEsQUExQ0QsSUEwQ0M7U0ExQ1ksNEJBQTRCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgcGlwZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBmb3JrSm9pbiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBHYWluZWRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvZ2FpbmVkLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBSZXF1ZXN0VXRpbCB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3JlcXVlc3QtdXRpbCc7XHJcbmltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoLWVzJztcclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdsaWItZ2FpbmVkLWNvbXB0ZW5jeS1jYXJkJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vZ2FpbmVkLWNvbXB0ZW5jeS1jYXJkLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9nYWluZWQtY29tcHRlbmN5LWNhcmQuY29tcG9uZW50LnNjc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgR2FpbmVkQ29tcHRlbmN5Q2FyZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gIHJlcXVlc3RVdGlsOiBhbnlcclxuICBsb2FkaW5nID0gZmFsc2VcclxuICBwYW5lbE9wZW5TdGF0ZTogQm9vbGVhbiA9IGZhbHNlO1xyXG4gIGdhaW5lZHByb2ZpY2VuY3lEYXRhOmFueVxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIGdhaW5lZFNlcnZpY2U6IEdhaW5lZFNlcnZpY2VcclxuXHJcbiAgKSB7XHJcbiAgICB0aGlzLnJlcXVlc3RVdGlsID0gbmV3IFJlcXVlc3RVdGlsKClcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5sb2FkaW5nID0gdHJ1ZVxyXG4gICAgY29uc3QgYWxsRW50aXR5ID0gdGhpcy5nZXRBbGxFbnRpdHkoKVxyXG4gICAgY29uc3QgdXNlclBhc3Nib29rID0gdGhpcy5nZXRBbGxVc2VyUGFzc2Jvb2soKVxyXG4gICAgZm9ya0pvaW4oW2FsbEVudGl0eSx1c2VyUGFzc2Jvb2tdKS5zdWJzY3JpYmUoKHJlcyk9PntcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLnJlcXVlc3RVdGlsLmZvcm1hdGVkR2FpbmVkQ29tcGV0ZW5jeShyZXNbMF0ucmVzdWx0LnJlc3BvbnNlLCByZXNbMV0ucmVzdWx0LmNvbnRlbnQpXHJcbiAgICAgIHRoaXMuZ2FpbmVkcHJvZmljZW5jeURhdGEgPSByZXNwb25zZVxyXG4gICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZVxyXG4gICAgfSlcclxuICB9XHJcbiBcclxuICBwcml2YXRlIGdldEFsbFVzZXJQYXNzYm9vaygpIHtcclxuICAgIGNvbnN0IHJlcUJvZHkgPSB7XHJcbiAgICAgIFwicmVxdWVzdFwiOiB7XHJcbiAgICAgICAgXCJ0eXBlTmFtZVwiOiBcImNvbXBldGVuY3lcIlxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHRoaXMuZ2FpbmVkU2VydmljZS5mZXRjaFVzZXJQYXNzYm9vayhyZXFCb2R5KVxyXG4gIH1cclxuXHJcblxyXG4gIHByaXZhdGUgZ2V0QWxsRW50aXR5KCkge1xyXG4gICAgY29uc3QgcmVxQm9keSA9IHtcclxuICAgICAgXCJzZWFyY2hcIjoge1xyXG4gICAgICAgIFwidHlwZVwiOiBcIkNvbXBldGVuY3lcIlxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuICB0aGlzLmdhaW5lZFNlcnZpY2UuZmV0Y2hBbGxFbnRpdHkocmVxQm9keSlcclxuICB9XHJcbn1cclxuIl19