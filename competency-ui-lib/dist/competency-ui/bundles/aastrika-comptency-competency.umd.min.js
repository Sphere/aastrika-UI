!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("lodash"),require("@aastrika/comptency/core"),require("@angular/common/http"),require("@angular/common"),require("lodash-es"),require("@aastrika/comptency/entry-module"),require("@angular/material")):"function"==typeof define&&define.amd?define("@aastrika/comptency/competency",["exports","@angular/core","rxjs","rxjs/operators","lodash","@aastrika/comptency/core","@angular/common/http","@angular/common","lodash-es","@aastrika/comptency/entry-module","@angular/material"],n):n(((e=e||self).aastrika=e.aastrika||{},e.aastrika.comptency=e.aastrika.comptency||{},e.aastrika.comptency.competency={}),e.ng.core,e.rxjs,e.rxjs.operators,e.lodash,e.aastrika.comptency.core,e.ng.common.http,e.ng.common,e.lodashEs,e.aastrika.comptency["entry-module"],e.ng.material)}(this,(function(e,n,t,r,i,a,o,c,l,d,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var p=function(e,n){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};function g(e,n){function t(){this.constructor=e}p(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}function u(e,n,t,r){var i,a=arguments.length,o=a<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,t,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(o=(a<3?i(o):a>3?i(n,t,o):i(n,t))||o);return a>3&&o&&Object.defineProperty(n,t,o),o}function m(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,i,a=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return o}var f=function(){function e(){this.formatedActivities=function(e){if(!i.isEmpty(e))return e},this.formatedActivitityByPostion=function(e){if(i.get(e,"result")){var n=i.get(e,"result.response").children;if(n.length>0)return i.reduce(n,(function(e,n){return e.push({roles:i.get(n,"name"),id:i.get(n,"id"),description:i.get(n,"description")}),e}),[])}},this.formatedActivitityByRoleId=function(e){if(i.get(e,"result")){var n=i.get(e,"result.response").children;if(n.length>0)return i.reduce(n,(function(e,n){return e.push({title:i.get(n,"name"),cid:i.get(n,"id"),description:i.get(n,"description")}),e}),[])}},this.formatedCompetency=function(e){var n=[];return i.forEach(e,(function(e){if(i.get(e,"result")){var t=i.get(e,"result.response").children;t.length>0&&i.forEach(t,(function(t){n.push({competency:i.get(t,"name"),id:i.get(t,"id"),description:i.get(t,"description"),levels:["Level 4","Level 5"],cid:i.get(e,"result.response").id})}))}})),n}}return e.prototype.formatedGainedCompetency=function(e,n){var t=this,r=[];return i.forEach(e,(function(e){var a=i.get(e,"id");i.forEach(n,(function(e){if(e.competencies.hasOwnProperty(a)){var n=e.competencies[a];r.push({title:i.get(n,"additionalParams.competencyName"),logs:t.acquiredPassbookLogs(i.get(n,"acquiredDetails")),proficiencyLevels:t.acauiredChannelColourCode(i.get(n,"acquiredDetails"))})}}))})),r},e.prototype.acquiredPassbookLogs=function(e){var n=[];return e.length>0&&i.forEach(e,(function(e){n.push({header:i.get(e,"courseName")?i.get(e,"courseName"):"",date:i.get(e,"createdDate"),description:i.get(e,"additionalParams.description"),keyboardArrowUp:!0,level:i.get(e,"competencyLevelId")})})),n},e.prototype.acauiredChannelColourCode=function(e){var n=[{color:"#FFFBB0",displayLevel:1,selected:!1},{color:"#FFFBB0",displayLevel:2,selected:!1},{color:"#FFFBB0",displayLevel:3,selected:!1},{color:"#FFFBB0",displayLevel:4,selected:!1},{color:"#FFFBB0",displayLevel:5,selected:!1}];return i.forEach(e,(function(e){switch(i.get(e,"acquiredChannel")){case"course":i.forEach(n,(function(n){n.displayLevel==i.get(e,"competencyLevelId")&&(n.color="#FFFBB0",n.selected=!0)}));break;case"selfAssessment":i.forEach(n,(function(n){n.displayLevel==i.get(e,"competencyLevelId")&&(n.color="#7CB5E6",n.selected=!0)}));break;case"admin":i.forEach(n,(function(n){n.displayLevel==i.get(e,"competencyLevelId")&&(n.color="#A4DFCA",n.selected=!0)}));break;default:i.forEach(n,(function(n){n.displayLevel==i.get(e,"competencyLevelId")&&(n.color="#FFFBB0",n.selected=!1)}))}})),n},e}(),y=function(e){function t(n){return e.call(this,n)||this}return g(t,e),t.prototype.getRequiredCompetencyById=function(e){var n={url:a.urlConfig.getEntityById(3),data:e};return console.log("reqBody",n),this.post(n)},t.ctorParameters=function(){return[{type:o.HttpClient}]},t.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new t(n.ɵɵinject(o.HttpClient))},token:t,providedIn:"root"}),t=u([n.Injectable({providedIn:"root"})],t)}(a.DataService),h=function(){function e(e){this.requiredCompetencyService=e,this.competencyData=[{title:"Procurement and Distribution of HCM",description:"Manages procurement and store raw materials for HCMs as per the pre-decided menu Supervises the preparation and distribution of HCM by Anganwadi Helper (AWH)",requiredLevel:"level 4"},{title:"Store management and planning and coordination of THR and Dry ration",description:"Mobilizes children and conducts ECCE activities as per the yearly activity calendar and the ECCE manual ",requiredLevel:"level 4"},{title:"Procurement and Distribution of HCM",description:"Manages procurement and store raw materials for HCMs as per the pre-decided menu Supervises the preparation and distribution of HCM by Anganwadi Helper (AWH)",requiredLevel:"level 4"},{title:"Early Childhood Care Education",description:"Mobilizes children and conducts ECCE activities as per the yearly activity calendar and the ECCE manual ",requiredLevel:"level 4"},{title:"Procurement and Distribution of HCM",description:"Manages procurement and store raw materials for HCMs as per the pre-decided menu Supervises the preparation and distribution of HCM by Anganwadi Helper (AWH)",requiredLevel:"level 4"},{title:"Early Childhood Care Education",description:"Mobilizes children and conducts ECCE activities as per the yearly activity calendar and the ECCE manual ",requiredLevel:"level 4"}],this.panelOpenState=!0,this.customCollapsedHeight="100px",this.customExpandedHeight="100px",this.loading=!1,this.logs=[{index:1,header:"Understands HCM guidelines"},{index:2,header:"Lists raw material required"},{index:3,header:"Plans for storage"},{index:4,header:"Motivates the AWH and children on optimal hygiene and handwashing practices"},{index:5,header:"Course-Name Completion"}],this.requestUtil=new f}return e.prototype.ngOnInit=function(){var e=this;this.unsubscribe=this.getRequiredByPostion().pipe(r.mergeMap((function(n){var r=e.requestUtil.formatedActivitityById(n);return t.of(r)}))).subscribe((function(e){console.log(e)}))},e.prototype.getRequiredByPostion=function(){return this.requiredCompetencyService.getRequiredCompetencyById({filter:{isDetail:!0}})},e.prototype.ngOnDestroy=function(){this.unsubscribe.unsubscribe()},e.ctorParameters=function(){return[{type:y}]},e=u([n.Component({selector:"lib-required-comptency-card",template:'<ng-container *ngFor="let competency of competencyData"\r\n  ><div class="card-container">\r\n    <mat-accordion>\r\n      <mat-expansion-panel\r\n        class="w-full panel"\r\n        (opened)="panelOpenState = true"\r\n        (closed)="panelOpenState = false"\r\n      >\r\n        <mat-expansion-panel-header\r\n          class="flex-between items-center panel-header w-full"\r\n          collapsedHeight="auto"\r\n          expandedHeight="auto"\r\n        >\r\n          <mat-panel-description class="panel-header-description">\r\n            <ng-container *ngIf="competency?.title">\r\n              <div class="title">{{ competency?.title }}</div>\r\n            </ng-container>\r\n          </mat-panel-description>\r\n          \x3c!-- <div class="level mb-0 pointer-events">\r\n            <mat-icon [ngClass]="{ arrowReverse: panelOpenState }"\r\n              >keyboard_arrow_down</mat-icon\r\n            >\r\n          </div> --\x3e\r\n        </mat-expansion-panel-header>\r\n\r\n        <lib-app-loader *ngIf="loading === true"></lib-app-loader>\r\n        <div class="logs">\r\n          <span class="log-title">Levels:</span>\r\n          <ng-container *ngFor="let log of logs">\r\n            <div class="log">\r\n              <ng-container *ngIf="log.header">\r\n                <span class="flex-1 log-items"\r\n                  >{{ log.index }} : {{ log.header }}</span\r\n                >\r\n              </ng-container>\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </mat-expansion-panel>\r\n    </mat-accordion>\r\n  </div>\r\n</ng-container>\r\n',styles:[":root{font-size:16px;--blue:#1C5D95;--yellow:#FFF4DF;--teal:#A4DFCA;--black:#000000;--white:#ffffff;--light-gray:#eff6fc;--grey-100:#DFEDF9;--gray-200:#8E8E8E;--gray-300:#989898;--gray-400:#808080;--grey-500:#919191;--yellow-500:#FFFBB0;--blue-500:#7CB5E6}.button-primary{background-color:var(--blue)!important;border-radius:50px;gap:8px;color:var(--white)!important;border:none}.mat-primary-background{padding:9px 40px;width:310px;cursor:pointer}.card-container{margin:15px 2px;padding:16px 10px 20px 14px;box-shadow:0 0 4px rgba(0,0,0,.15);border-radius:10px;background:#fff}.title{font-size:16px;line-height:19px;letter-spacing:-.02em;color:#000}.description{font-size:14px;line-height:17px;letter-spacing:-.02em}.start-btn{background-color:#1c5d95!important;border-radius:50px;padding:8px 32px;gap:8px;font-size:16px;line-height:19px;color:#fff!important;margin-top:10px;border:none}.proficiency{color:#1c5d96;font-size:20px;cursor:pointer;margin-top:15px}.log-title{font-size:14px;line-height:24px;letter-spacing:-.02em;color:#1c5d95}.log{border-bottom:1px solid #ddd;padding-bottom:9px;margin-top:10px}.logs{padding:5px}.log-items{font-size:16px;line-height:19px;letter-spacing:-.02em;color:#000}::ng-deep .mat-expansion-panel-header{padding:0 5px!important}:host ::ng-deep .mat-expansion-panel-header:hover{background:rgba(255,255,255,.98)!important}:host ::ng-deep .mat-content{display:flex!important}.level{place-self:flex-end}"]})],e)}(),v=function(e){function t(n){return e.call(this,n)||this}return g(t,e),t.prototype.fetchUserPassbook=function(e){var n={url:a.urlConfig.getUserPassbook(),data:e};return this.post(n)},t.prototype.fetchAllEntity=function(e){var n={url:a.urlConfig.getAllEntity(),data:e};return this.post(n)},t.ctorParameters=function(){return[{type:o.HttpClient}]},t.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new t(n.ɵɵinject(o.HttpClient))},token:t,providedIn:"root"}),t=u([n.Injectable({providedIn:"root"})],t)}(a.DataService),b=function(){function e(e){this.gainedService=e,this.loading=!1,this.panelOpenState=!1,this.requestUtil=new f}return e.prototype.ngOnInit=function(){var e=this;this.loading=!0;var n=this.getAllEntity(),r=this.getAllUserPassbook();t.forkJoin([n,r]).subscribe((function(n){var t=e.requestUtil.formatedGainedCompetency(n[0].result.response,n[1].result.content);e.gainedproficencyData=t,e.loading=!1}))},e.prototype.getAllUserPassbook=function(){return this.gainedService.fetchUserPassbook({request:{typeName:"competency"}})},e.prototype.getAllEntity=function(){return this.gainedService.fetchAllEntity({search:{type:"Competency"}})},e.ctorParameters=function(){return[{type:v}]},e=u([n.Component({selector:"lib-gained-comptency-card",template:'<lib-app-loader *ngIf="loading === true"></lib-app-loader>\r\n<ng-container *ngFor="let proficency of gainedproficencyData">\r\n<div class="card-container example-container container-balanced">\r\n    \x3c!-- <div class="date justify-end mr-2">\r\n        {{date}}\r\n    </div> --\x3e\r\n    <ng-container *ngIf="proficency?.title">\r\n        <div class="title">{{proficency?.title}}</div>\r\n    </ng-container>\r\n\r\n    <div class="levelsTitle">\r\n        Levels:\r\n    </div>\r\n    <mat-accordion>\r\n        <mat-expansion-panel class="w-full panel" hideToggle (opened)="panelOpenState = true"\r\n            (closed)="panelOpenState = false">\r\n            <mat-expansion-panel-header class="flex-between items-center panel-header w-full">\r\n                <mat-panel-description class="panel-header-description">\r\n                    <ng-container *ngFor="let proficiency of proficency?.proficiencyLevels">\r\n                        <ng-container *ngIf="proficiency.selected; else addLevel">\r\n                            <div class="level mb-1" [ngStyle]="{\'background-color\': proficiency.color}">\r\n                                {{proficiency?.displayLevel}}\r\n                            </div>\r\n                        </ng-container>\r\n                        <ng-template #addLevel>\r\n                            <div (click)="$event.stopPropagation();" class="level mb-1 pointer-events">\r\n                                {{proficiency?.displayLevel}}\r\n                            </div>\r\n                        </ng-template>\r\n                    </ng-container>\r\n                    <div class="level mb-1 pointer-events">\r\n                        <mat-icon [ngClass]="{\'arrowReverse\': panelOpenState }">keyboard_arrow_down</mat-icon>\r\n                    </div>\r\n                </mat-panel-description>\r\n            </mat-expansion-panel-header>\r\n            <div>\r\n                <span class="log-header">Log:</span>\r\n                <ng-container *ngFor="let log of proficency?.logs; let logIndex = index">\r\n                    <div class="log">\r\n                        <div class="flex">\r\n                            <ng-container *ngIf="log.header">\r\n                                <span class="flex-1">Level {{log.level}}: {{log.header}}</span>\r\n                                <span class="log-date mr-2">{{log?.date| date:\'dd/MM/yyyy\'}}</span>\r\n                            </ng-container>\r\n                        </div>\r\n                        <ng-container *ngIf="log.description">\r\n                            <div class="mt-2" [ngClass]="{\'hideContent\': !log.keyboardArrowUp}">{{log.description}}</div>\r\n                            <div class="justify-end">\r\n                                <mat-icon (click)="log.keyboardArrowUp = !log.keyboardArrowUp" class="mr-3 pointer-events" [ngClass]="{\'arrowReverse\': log.keyboardArrowUp }">keyboard_arrow_down</mat-icon>\r\n                            </div>\r\n                        </ng-container>\r\n                    </div>\r\n                </ng-container>\r\n            </div>\r\n        </mat-expansion-panel>\r\n    </mat-accordion>\r\n</div>\r\n</ng-container>',styles:[":root{font-size:16px;--blue:#1C5D95;--yellow:#FFF4DF;--teal:#A4DFCA;--black:#000000;--white:#ffffff;--light-gray:#eff6fc;--grey-100:#DFEDF9;--gray-200:#8E8E8E;--gray-300:#989898;--gray-400:#808080;--grey-500:#919191;--yellow-500:#FFFBB0;--blue-500:#7CB5E6}.button-primary{background-color:var(--blue)!important;border-radius:50px;gap:8px;color:var(--white)!important;border:none}.mat-primary-background{padding:9px 40px;width:310px;cursor:pointer}.date{font-size:12px;line-height:14px;letter-spacing:-.02em;color:var(--gray-300)}.justify-end{display:flex;justify-content:flex-end}.card-container{margin:15px 2px;padding:14px 10px 20px 14px;box-shadow:0 0 4px rgba(0,0,0,.15);border-radius:10px;background:var(--white)}.title{font-size:24px;line-height:29px;letter-spacing:-.02em;margin-bottom:18px}.levelsTitle{font-size:14px;line-height:24px;letter-spacing:-.02em;color:var(--black)}.panel{box-shadow:0 0!important;padding:1px 3px 1px 0;pointer-events:none}.panel-header{padding:0!important;background:0 0!important}.panel-header-description{margin:0!important;padding:1px}.pointer-events{pointer-events:all;cursor:pointer}.arrowReverse{transform:rotateX(180deg)}.level{width:47px;max-width:16.6%;height:36px;display:flex;justify-content:center;align-items:center;box-shadow:0 0 2.17333px rgba(0,0,0,.2509803922)}.log-header{font-size:14px;line-height:24px;letter-spacing:-.02em;color:var(--black)}.log{font-style:italic;font-size:14px;line-height:16px;letter-spacing:-.02em;color:var(--gray-400);border-bottom:1px solid #ddd;padding-bottom:9px;margin-top:10px}.log-date{font-style:normal;font-size:12px;line-height:14px;letter-spacing:-.02em;color:var(--gray-400)}::ng-deep .mat-expansion-panel-body{padding:0!important}:host ::ng-deep .mat-content{display:unset!important}.hideContent{display:none}"]})],e)}(),x=function(){function e(e){this.location=e,this.stateChange=new n.EventEmitter,this.tabIndex=0}return e.prototype.ngOnInit=function(){},e.prototype.navigateBack=function(){this.location.back()},e.prototype.changeTab=function(e){this.tabIndex=e.index},e.prototype.startSelfAssessment=function(){this.stateChange.emit({navigation:!0})},e.ctorParameters=function(){return[{type:c.Location}]},u([n.Output()],e.prototype,"stateChange",void 0),e=u([n.Component({selector:"lib-competency-dashboard",template:'<div class="content">\r\n  <mat-icon (click)="navigateBack()" class="cursor-pointer mb-3">chevron_left</mat-icon>\r\n\r\n  <h1 class=" pl-2 mb-0">Competency Dashboard</h1>\r\n\r\n  <div class="pl-2 tab-container">\r\n    \x3c!-- <ng-container *ngIf="tabIndex === 0"> --\x3e\r\n      \x3c!-- <div class="sortIcon">\r\n        <img src="./projects/competency-ui/assets/images/filter.png">\r\n      </div>\r\n    </ng-container> --\x3e\r\n    <mat-tab-group [ngClass]="{\'header-width-icon\': tabIndex === 0}" class="remove-border-bottom"\r\n      animationDuration="0ms" selectedIndex="0" (selectedTabChange)="changeTab($event)">\r\n\r\n        \x3c!-- gained  --\x3e\r\n        <mat-tab label="Gained">\r\n          <div class="legend-container">\r\n            <div class="legend legend-blue "></div>\r\n            <h5>Self Assessment</h5>\r\n            <div class="legend legend-yellow"></div>\r\n            <h5>Course</h5>\r\n            <div class="legend legend-green"></div>\r\n            <h5>Admin added</h5>\r\n          </div>      \r\n            <lib-gained-comptency-card *ngIf="tabIndex === 0"></lib-gained-comptency-card>\r\n        </mat-tab>\r\n     \r\n      \x3c!-- Active Summary --\x3e\r\n      <mat-tab label="Activity Summary" >         \r\n            <lib-active-summary *ngIf="tabIndex === 1"></lib-active-summary>\r\n      </mat-tab>\r\n\r\n       \x3c!-- required --\x3e\r\n       <mat-tab label="Required">\r\n        <div class="required-comperencies">          \r\n            <lib-required-comptency-card *ngIf="tabIndex === 2"></lib-required-comptency-card>\r\n        </div>\r\n        <div class="btn-container">\r\n          <button class="btn-start" (click)="startSelfAssessment()">Start Self Assessment</button>\r\n        </div>\r\n      </mat-tab>\r\n\r\n\r\n\r\n    </mat-tab-group>\r\n\r\n\r\n  </div>\r\n</div>',styles:[":root{font-size:16px;--blue:#1C5D95;--yellow:#FFF4DF;--teal:#A4DFCA;--black:#000000;--white:#ffffff;--light-gray:#eff6fc;--grey-100:#DFEDF9;--gray-200:#8E8E8E;--gray-300:#989898;--gray-400:#808080;--grey-500:#919191;--yellow-500:#FFFBB0;--blue-500:#7CB5E6}.button-primary{background-color:var(--blue)!important;border-radius:50px;gap:8px;color:var(--white)!important;border:none}.mat-primary-background{padding:9px 40px;width:310px;cursor:pointer}.content{padding:60px 0 50px;margin:auto}@media only screen and (min-width:960px){.content{max-width:30%;padding:20px 20px 0}}@media only screen and (min-width:1280px){.content{max-width:35%}}@media only screen and (min-width:1920px){.content{max-width:30%}}@media only screen and (min-width:600px) and (max-width:959px){.content{max-width:50%}}.remove-border-bottom .mat-tab-header{border-bottom:none}:host ::ng-deep .remove-border-bottom .mat-tab-header{border-bottom:none!important}::ng-deep .mat-tab-label{padding:0!important;min-width:65px!important;color:var(--gray-200)!important;opacity:1.6!important;font-size:16px!important;margin-right:10px}::ng-deep .mat-tab-label-active{color:var(--blue)!important}:host ::ng-deep .mat-ink-bar{height:3px!important;background:var(--blue)!important;border-radius:5px!important}::ng-deep .theme-igot.day-mode .mat-ink-bar{background-color:var(--blue)!important}.legend-container{display:flex;gap:10px;margin-top:20px;align-items:center;margin-bottom:20px}.legend-container h5{margin:0;font-weight:400;font-size:16px}@media only screen and (max-width:599px){.content{max-width:90%}.legend-container{gap:5px}.legend-container h5{font-size:12px}}.legend-container .legend{min-width:15px;height:15px;background:#dfedf9;border-radius:50%}.legend-container .legend-green{background:var(--teal)}.legend-container .legend-blue{background:#7cb5e6}.legend-container .legend-yellow{background:#fffbb0}.required-comperencies{height:calc(100vh - 270px);overflow:auto}.btn-start{width:311px;height:35px;background:var(--blue);border-radius:50px;border:none;color:var(--white)}.tab-container{display:flex;flex-direction:column;gap:10px}.tab-container .btn-container{display:flex;justify-content:center}"]})],e)}(),C=function(e){function t(n){return e.call(this,n)||this}return g(t,e),t.prototype.getActivityById=function(e){var n={url:a.urlConfig.getEntityById(e.id),data:e};return this.post(n)},t.ctorParameters=function(){return[{type:o.HttpClient}]},t.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new t(n.ɵɵinject(o.HttpClient))},token:t,providedIn:"root"}),t=u([n.Injectable({providedIn:"root"})],t)}(a.DataService),w=function(){function e(e,n){this.activeSummaryService=e,this.configService=n,this.panelOpenState=!0,this.loading=!1,this.acordianLoading=!1,this.requestUtil=new f}return e.prototype.ngOnInit=function(){var e=this;this.loading=!0,this.unsubscribe=this.getActivityByRole().pipe(r.mergeMap((function(n){var r=e.requestUtil.formatedActivitityByPostion(n);return t.of(r)}))).subscribe((function(n){e.loading=!1,e.roleactivitySummaries=n})),this.profileData=JSON.parse(this.configService.getConfig()).profileData[0].designation},e.prototype.getActivityByRole=function(){var e={filter:{isDetail:!0},id:"AWW"===this.profileData?95:1};return this.activeSummaryService.getActivityById(e)},e.prototype.getActivityByRoleId=function(e){var n=this;this.panelOpenState=!0,this.acordianLoading=!0;var i=l.findIndex(this.roleactivitySummaries,{id:e});this.roleactivitySummaries[i].activities=[],this.getEntityById(e).pipe(r.mergeMap((function(e){var r=n.requestUtil.formatedActivitityByRoleId(e);n.roleactivitySummaries[i].activities=r;var a=l.map(n.roleactivitySummaries[i].activities,"cid"),o=[];return l.forEach(a,(function(e){o.push(n.getEntityById(e))})),n.acordianLoading=!1,t.forkJoin.apply(void 0,function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(m(arguments[n]));return e}(o))}))).subscribe((function(e){var t=n.requestUtil.formatedCompetency(e);n.roleactivitySummaries[i].activities=l.values(l.merge(l.keyBy(t,"cid"),l.keyBy(n.roleactivitySummaries[i].activities,"cid")))}))},e.prototype.getEntityById=function(e){var n={filter:{isDetail:!0},id:e};return this.activeSummaryService.getActivityById(n)},e.prototype.ngOnDestroy=function(){this.unsubscribe.unsubscribe()},e.ctorParameters=function(){return[{type:C},{type:d.ConfigService}]},e=u([n.Component({selector:"lib-active-summary",template:'<lib-app-loader *ngIf="loading === true"></lib-app-loader>\r\n<ng-container *ngFor="let role of roleactivitySummaries">\r\n  <div class="">\r\n    <mat-accordion>\r\n      <mat-expansion-panel\r\n        class="w-full panel r"\r\n        (opened)="getActivityByRoleId(role.id)"\r\n        (closed)="panelOpenState = false"\r\n      >\r\n        <mat-expansion-panel-header\r\n          class="card-containe flex-between items-center panel-header w-full"\r\n          collapsedHeight="auto"\r\n          expandedHeight="auto"\r\n        >\r\n          <mat-panel-description class="panel-header-description">\r\n            <ng-container *ngIf="role?.roles">\r\n              <div class="title">{{ role?.roles }}</div>\r\n            </ng-container>\r\n          </mat-panel-description>\r\n        </mat-expansion-panel-header>\r\n        <lib-app-loader *ngIf="acordianLoading === true"></lib-app-loader>\r\n        <div class="expand-container" *ngIf="roleactivitySummaries.length>0">\r\n          <ng-container\r\n            *ngFor="let activity of role?.activities; let i = index"\r\n          >\r\n            <div class="activity-title">\r\n              {{ i + 1 }}.{{ activity.title }}\r\n            </div>\r\n            <div class="competency-container">\r\n              <div class="competency-title">{{ activity.competency }}</div>\r\n              <div class="level">\r\n                <ng-container *ngFor="let level of activity.levels">\r\n                  {{ level }}\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </mat-expansion-panel>\r\n    </mat-accordion>\r\n   \r\n  </div>\r\n</ng-container>\r\n',styles:[":root{font-size:16px;--blue:#1C5D95;--yellow:#FFF4DF;--teal:#A4DFCA;--black:#000000;--white:#ffffff;--light-gray:#eff6fc;--grey-100:#DFEDF9;--gray-200:#8E8E8E;--gray-300:#989898;--gray-400:#808080;--grey-500:#919191;--yellow-500:#FFFBB0;--blue-500:#7CB5E6}.button-primary{background-color:var(--blue)!important;border-radius:50px;gap:8px;color:var(--white)!important;border:none}.mat-primary-background{padding:9px 40px;width:310px;cursor:pointer}.card-container{margin:15px 2px;padding:16px 10px 20px 14px;box-shadow:0 0 4px rgba(0,0,0,.15);border-radius:10px;background:var(--light-gray)!important}.spinner-loading{display:flex;justify-content:center}.title{font-size:16px;line-height:19px;letter-spacing:-.02em;color:var(--blue)}.icon-down{place-self:flex-end;color:var(--blue)!important}:host ::ng-deep .mat-expansion-panel{margin:10px 0;height:auto}:host ::ng-deep .mat-expansion-panel-header:hover{background:#eff6fc!important}:host ::ng-deep .mat-expansion-panel-header{padding:15px!important;background-color:var(--light-gray)!important;border-radius:10px!important}:host ::ng-deep .mat-expansion-indicator:after{color:var(--blue)!important}.activity-title{font-size:24px;line-height:28px;letter-spacing:-.02em;color:var(--black)}.competency-container{background:var(--white);box-shadow:0 0 4px rgba(0,0,0,.15);border-radius:10px;padding:10px;margin:18px 0 15px}.competency-container .competency-title{font-size:20px;line-height:25px;letter-spacing:-.02em;color:var(--black);margin-bottom:20px}.competency-container .level{font-size:24px;line-height:24px;letter-spacing:-.02em;color:var(--blue)}.expand-container{padding:15px 15px 0}"]})],e)}(),k=function(){function e(){}return e=u([n.NgModule({declarations:[h,b,x,w],imports:[c.CommonModule,s.MatTabsModule,s.MatIconModule,s.MatExpansionModule,o.HttpClientModule,a.CoreModule],exports:[h,b,x,w]})],e)}();e.CompetencyDashboardComponent=x,e.CompetencyModule=k,e.GainedComptencyCardComponent=b,e.RequestUtil=f,e.RequiredComptencyCardComponent=h,e.ɵa=y,e.ɵb=v,e.ɵc=w,e.ɵd=C,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=aastrika-comptency-competency.umd.min.js.map